<!DOCTYPE html>
<html>
  <head>
    <title>Form Autosave</title>

    <style type="text/css">
      body {
        margin: 1em auto;
        max-width: 40em;
        width: 88%;
      }

      label,
      input,
      textarea {
        display: block;
        width: 100%;
      }

      input,
      textarea {
        margin-bottom: 1em;
      }

      textarea {
        height: 8em;
      }
    </style>
  </head>
  <body>
    <h1>Form Autosave</h1>

    <form class="save-me" id="save-me">
      <label for="name">Name</label>
      <input type="text" name="name" id="name" />

      <label for="address">Address</label>
      <input type="text" name="address" id="address" />

      <label for="email">Email</label>
      <input type="email" name="email" id="email" />

      <label for="more">Additional thoughts?</label>
      <textarea name="more" id="more"></textarea>

      <p>
        <button type="submit">Submit</button>
      </p>
    </form>

    <script>
      // create the necessary constants
      const form = document.querySelector("#save-me");
      const nameInput = document.querySelector("#name");
      const addressInput = document.querySelector("#address");
      const emailInput = document.querySelector("#email");
      const text = document.querySelector("#more");

      // Prevent form from being submitted
      form.addEventListener("submit", function (event) {
        event.preventDefault();
      });

      // store the name entered in the web storage
      nameInput.addEventListener("input", function (event) {
        localStorage.setItem("name", nameInput.value);
        // run to display the user's saved data
        savedDataDisplay();
      });

      // store the adress entered in the web storage
      addressInput.addEventListener("input", function (event) {
        localStorage.setItem("address", addressInput.value);
        // run to display the user's saved data
        savedDataDisplay();
      });

      // store the email entered in the web storage
      emailInput.addEventListener("input", function (event) {
        localStorage.setItem("email", emailInput.value);
        // run to display the user's saved data
        savedDataDisplay();
      });

      // store the text entered in the web storage
      text.addEventListener("keypress", function (event) {
        localStorage.setItem("text", text.value);
        // run to display the user's saved data
        savedDataDisplay();
      });

      // form is submitted, wipe the form and  clear the data from storage
      form.addEventListener("submit", function (event) {
        nameInput.value = "";
        addressInput.value = "";
        emailInput.value = "";
        text.value = "";

        localStorage.clear();
      });


      // define function
      (function savedDataDisplay() {
        if (localStorage.getItem("name")) {
          let name = localStorage.getItem("name");
          nameInput.value = name;
        }
      })();
    </script>
  </body>
</html>
